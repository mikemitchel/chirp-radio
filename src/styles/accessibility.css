/* accessibility.css - Global Accessibility Utilities */

/* ============================================ */
/* === SCREEN READER UTILITIES === */
/* ============================================ */

/* Screen reader only - completely hidden but accessible to screen readers */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Visually hidden but accessible - alternative approach */
.visually-hidden {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* Skip link styling - typically for "Skip to main content" */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: var(--cr-ink);
  color: var(--cr-paper);
  padding: 8px;
  text-decoration: none;
  border-radius: var(--cr-space-1);
  z-index: 10000;
  font-weight: 600;
}

.skip-link:focus {
  top: 6px;
}

/* ============================================ */
/* === REDUCED MOTION PREFERENCES === */
/* ============================================ */

/* Global reduced motion - removes ALL transitions and animations */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Targeted reduced motion - apply to specific component types */
@media (prefers-reduced-motion: reduce) {
  /* Buttons and interactive elements */
  .cr-btn,
  button,
  [role='button'] {
    transition: none !important;
  }

  /* Remove hover transforms */
  .cr-btn:hover,
  button:hover,
  [role='button']:hover {
    transform: none !important;
  }

  /* Cards and clickable containers */
  .cr-card,
  .cr-store-item-card,
  .cr-dj-show-card,
  [role='link'] {
    transition: none !important;
  }

  .cr-card:hover,
  .cr-store-item-card:hover,
  .cr-dj-show-card:hover {
    transform: none !important;
  }

  /* Modal and overlay animations */
  .cr-sidebar,
  .cr-sidebar__backdrop,
  .cr-modal,
  .cr-toast {
    transition: none !important;
    animation: none !important;
  }

  /* Form controls */
  .cr-toggle,
  .cr-toggle__track,
  .cr-toggle__thumb {
    transition: none !important;
  }

  /* Navigation elements */
  .cr-main-nav,
  .cr-breadcrumb {
    transition: none !important;
  }

  /* Remove backdrop filters that can cause motion sensitivity */
  .cr-toast__content,
  .cr-mobile-frame__header {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }

  /* Progress and loading animations */
  .cr-donation-bar__fill {
    transition: none !important;
  }

  .cr-donation-bar:hover {
    transform: none !important;
  }
}

/* ============================================ */
/* === HIGH CONTRAST MODE SUPPORT === */
/* ============================================ */

@media (prefers-contrast: high) {
  /* Add borders to components for better definition */
  .cr-sidebar,
  .cr-card,
  .cr-donation-bar,
  .cr-store-item-card {
    border: 2px solid currentColor !important;
  }

  /* Strengthen borders on interactive elements */
  .cr-store-item__select,
  input,
  textarea,
  select {
    border-width: 2px !important;
  }

  /* Clickable cards get transparent border that becomes visible on hover */
  .cr-store-item-card--clickable {
    border: 2px solid transparent !important;
  }

  .cr-store-item-card--clickable:hover {
    border-color: currentColor !important;
  }

  /* Strengthen backdrop opacity for better contrast */
  .cr-sidebar__backdrop {
    background-color: rgba(0, 0, 0, 0.8) !important;
  }

  /* Ensure progress bars have visible borders */
  .cr-donation-bar__fill {
    border: 1px solid currentColor !important;
  }

  /* Card details need clearer separation */
  .cr-card-details {
    border: 1px solid var(--cr-ink) !important;
  }

  /* Mobile frame headers need definition */
  .cr-mobile-frame--landing .cr-mobile-frame__header {
    border-bottom: 2px solid currentColor !important;
  }
}

/* ============================================ */
/* === FOCUS MANAGEMENT === */
/* ============================================ */

/* Enhanced focus styles for better keyboard navigation */
.cr-btn:focus-visible,
button:focus-visible,
[role='button']:focus-visible {
  outline: 3px solid var(--cr-primary-500) !important;
  outline-offset: 2px !important;
}

/* Links and navigation focus */
a:focus-visible,
[role='link']:focus-visible {
  outline: 3px solid var(--cr-secondary-500) !important;
  outline-offset: 2px !important;
}

/* Form controls focus - already defined in index.css but reinforced here */
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: none !important;
  border-color: var(--cr-primary-500) !important;
  box-shadow: 0 0 0 3px var(--cr-primary-100) !important;
}

/* Toggle focus */
.cr-toggle__input:focus-visible + .cr-toggle__track {
  outline: 3px solid var(--cr-primary-500) !important;
  outline-offset: 2px !important;
}

/* ============================================ */
/* === ARIA LIVE REGIONS === */
/* ============================================ */

/* Ensure proper announcement for dynamic content */
[aria-live='polite'],
[aria-live='assertive'],
[role='alert'],
[role='status'] {
  position: relative;
}

/* Toast-specific aria enhancements - already in component but documented here */
.cr-toast {
  role: alert;
  aria-live: polite;
}

.cr-toast--error {
  aria-live: assertive;
}

/* ============================================ */
/* === KEYBOARD NAVIGATION ENHANCEMENTS === */
/* ============================================ */

/* Ensure all interactive elements are keyboard accessible */
[tabindex='0'],
[tabindex='-1'] {
  cursor: pointer;
}

/* Skip redundant focus on disabled elements */
[disabled],
[aria-disabled='true'] {
  cursor: not-allowed !important;
  pointer-events: none !important;
}

/* ============================================ */
/* === RESPONSIVE ACCESSIBILITY === */
/* ============================================ */

/* Touch target sizing for mobile accessibility */
@media (max-width: 640px) {
  /* Form inputs need touch targets */
  input,
  select,
  textarea {
    min-height: 44px;
  }
}

/* ============================================ */
/* === COLOR AND VISIBILITY === */
/* ============================================ */

/* Ensure sufficient color contrast is maintained */
@media (prefers-contrast: high) {
  /* Strengthen text contrast */
  .cr-default-500 {
    color: var(--cr-default-700) !important;
  }

  .cr-default-400 {
    color: var(--cr-default-600) !important;
  }

  /* Ensure placeholder text is visible */
  input::placeholder,
  textarea::placeholder {
    color: var(--cr-default-700) !important;
  }
}

/* ============================================ */
/* === UTILITY CLASSES === */
/* ============================================ */

/* Accessibility helper classes */
.aria-label-only {
  /* For elements that only need aria-label, no visible text */
  text-indent: -9999px;
  overflow: hidden;
}

.focus-trap {
  /* For modal containers that should trap focus */
  position: relative;
}

.no-select {
  /* Prevent text selection where inappropriate */
  user-select: none;
  -webkit-user-select: none;
}

/* Status indicators */
.status-success {
  color: var(--cr-support-success-fg) !important;
}

.status-warning {
  color: var(--cr-support-warning-fg) !important;
}

.status-error {
  color: var(--cr-support-error-fg) !important;
}

.status-info {
  color: var(--cr-support-info-fg) !important;
}
